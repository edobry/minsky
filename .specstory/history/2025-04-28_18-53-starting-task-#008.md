<!-- Generated by SpecStory -->

# Starting Task #008 (2025-04-28 14:53:38)

_**User**_

start working on task #008

---

_**Assistant**_

<details>
            <summary>Searched codebase "task #008" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `process/tasks/001-update-session-start-task-id.md` | L1-44 |
| `process/tasks.md` | L1-20 |
| `process/tasks/007-add-tasks-create-command.md` | L1-64 |
| `.cursor/rules/derived-cursor-rules.mdc` | L418-466 |
| `process/tasks/001-update-session-start-task-id.md` | L44-90 |
| `process/tasks/003-add-init-command.md` | L1-29 |
| `process/tasks/004-add-task-option-to-session-get.md` | L1-60 |
| `.cursor/rules/creating-tasks.mdc` | L1-58 |
| `.cursor/rules/derived-cursor-rules.mdc` | L300-355 |
| `.cursor/rules/minsky-workflow.mdc` | L142-193 |
| `.cursor/rules/derived-cursor-rules.mdc` | L355-418 |
| `src/domain/tasks.ts` | L36-43 |
| `.cursor/rules/derived-cursor-rules.mdc` | L196-236 |
| `src/domain/tasks.ts` | L1-14 |
| `src/domain/tasks.ts` | L102-148 |
| `.cursor/rules/creating-tasks.mdc` | L58-119 |
| `src/domain/tasks.ts` | L78-102 |
| `.cursor/rules/minsky-workflow.mdc` | L193-223 |
| `.cursor/rules/minsky-workflow.mdc` | L46-86 |
| `src/domain/tasks.ts` | L14-22 |
| `src/commands/tasks/index.ts` | L1-15 |
| `src/commands/tasks/status.ts` | L72-82 |
| `.cursor/rules/derived-cursor-rules.mdc` | L1-170 |
| `src/domain/tasks.ts` | L184-221 |
| `src/commands/session/start.ts` | L19-72 |

</details>

---

<details>
            <summary>Searched codebase "task #008" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `process/tasks/001-update-session-start-task-id.md` | L1-44 |
| `process/tasks.md` | L1-20 |
| `process/tasks/007-add-tasks-create-command.md` | L1-64 |
| `.cursor/rules/derived-cursor-rules.mdc` | L418-466 |
| `process/tasks/001-update-session-start-task-id.md` | L44-90 |
| `process/tasks/003-add-init-command.md` | L1-29 |
| `process/tasks/004-add-task-option-to-session-get.md` | L1-60 |
| `.cursor/rules/creating-tasks.mdc` | L1-58 |
| `.cursor/rules/derived-cursor-rules.mdc` | L300-355 |
| `.cursor/rules/minsky-workflow.mdc` | L142-193 |
| `.cursor/rules/derived-cursor-rules.mdc` | L355-418 |
| `src/domain/tasks.ts` | L36-43 |
| `.cursor/rules/derived-cursor-rules.mdc` | L196-236 |
| `src/domain/tasks.ts` | L1-14 |
| `src/domain/tasks.ts` | L102-148 |
| `.cursor/rules/creating-tasks.mdc` | L58-119 |
| `src/domain/tasks.ts` | L78-102 |
| `.cursor/rules/minsky-workflow.mdc` | L193-223 |
| `.cursor/rules/minsky-workflow.mdc` | L46-86 |
| `src/domain/tasks.ts` | L14-22 |
| `src/commands/tasks/status.ts` | L72-82 |
| `src/commands/tasks/index.ts` | L1-15 |
| `.cursor/rules/derived-cursor-rules.mdc` | L1-170 |
| `src/domain/tasks.ts` | L184-221 |
| `src/commands/session/start.ts` | L19-72 |

</details>

---

```bash
minsky tasks list --json | jq '.'
```

```
[
  {
    "id": "#001",
    "title": "Update session start command to support task IDs",
    "status": "DONE",
    "description": ""
  },
  {
    "id": "#002",
    "title": "Store session repos under per-repo directories and add repoName to
 session DB",
    "status": "TODO",
    "description": ""
  },
  {
    "id": "#003",
    "title": "Add `init` command to set up a project for Minsky",
    "status": "TODO",
    "description": ""
  },
  {
    "id": "#004",
    "title": "Add `--task` option to `session get` command to query sessions by
task ID",
    "status": "TODO",
    "description": ""
  },
  {
    "id": "#005",
    "title": "Add `git push` command to simplify pushing branches to remote repo
sitories",
    "status": "TODO",
    "description": ""
  },
  {
    "id": "#006",
    "title": "Add `--quiet` option to `session start` for programmatic output",
    "status": "TODO",
    "description": ""
  },
  {
    "id": "#007",
    "title": "Add `minsky tasks create` command to create tasks from spec docume
nts",
    "status": "TODO",
    "description": ""
  },
  {
    "id": "#008",
    "title": "Update `tasks list` to default to not-DONE tasks only, add option
to show DONE",
    "status": "TODO",
    "description": ""
  }
]

```

---

```bash
minsky tasks get '#008' --json | jq '.'
```

```
edobry@linkslate minsky % minsky tasks get '#008' --json | jq '.'
{
  "id": "#008",
  "title": "Update `tasks list` to default to not-DONE tasks only, add option to show DONE",
  "status": "TODO",
  "description": ""
}
edobry@linkslate minsky %
```

---

<details>
            <summary>Searched codebase "008-update-tasks-list" • **1** results</summary>
        
| File |
|------|
| `undefined` |

</details>

---

Read file: process/tasks/008-update-tasks-list-hide-done.md

---

Here is the current state and next steps for starting work on **task #008**:

---

### Task #008: Update `tasks list` to Default to Not-DONE Tasks Only

**Objective:**  
Improve the usability of the `minsky tasks list` command by hiding completed (DONE) tasks by default, and only showing them when explicitly requested via a CLI option.

**Key Requirements:**
- By default, `minsky tasks list` should only show tasks that are not DONE (i.e., TODO, IN-PROGRESS, IN-REVIEW).
- Add a CLI option (`--all` or `--show-done`) to include DONE tasks in the output.
- The new option must work for both standard and JSON output.
- Filtering must be performed in the domain layer, not just the CLI.
- Update help text and documentation.
- Add/update tests to cover the new default and the new option.

**Implementation Steps:**
- Update the `tasks list` command to filter out DONE tasks by default.
- Add a CLI option to include DONE tasks.
- Update domain logic to support filtering by status (if not already present).
- Update help text and documentation.
- Add/update tests to verify:
  - Default output excludes DONE tasks.
  - Output with the new option includes DONE tasks.
  - JSON output respects the new option.
- Update the changelog.

**Verification:**
- By default, `minsky tasks list` only shows tasks that are not DONE.
- `minsky tasks list --all` (or `--show-done`) shows all tasks, including DONE.
- Help text documents the new behavior and option.
- Tests pass for both default and new option behaviors.
- Changelog is updated with a reference to this task spec.

---

**Next step:**  
- Review the current implementation of the `tasks list` command and the domain logic for task filtering.
- Prepare to update the CLI and domain logic to implement the above requirements.

Proceeding to review the current `tasks list` command implementation and domain filtering logic.

---

<details>
            <summary>Searched codebase "list.ts" • **3** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |
| `undefined` |

</details>

---

Read file: src/commands/tasks/list.ts

---

<details>
            <summary>Searched codebase "listTasks" • **25** results</summary>
        
| File | Lines |
|------|-------|
| `src/domain/tasks.ts` | L184-221 |
| `src/domain/tasks.ts` | L14-22 |
| `src/domain/tasks.ts` | L148-179 |
| `src/domain/tasks.ts` | L58-68 |
| `src/domain/tasks.ts` | L22-26 |
| `src/domain/tasks.ts` | L1-14 |
| `src/domain/tasks.test.ts` | L145-156 |
| `src/domain/tasks.ts` | L36-43 |
| `src/domain/tasks.test.ts` | L156-190 |
| `src/domain/tasks.ts` | L102-148 |
| `src/domain/tasks.ts` | L26-34 |
| `src/domain/tasks.test.ts` | L102-145 |
| `src/domain/tasks.test.ts` | L1-60 |
| `src/domain/tasks.ts` | L43-50 |
| `src/domain/tasks.ts` | L179-184 |
| `src/domain/tasks.ts` | L68-73 |
| `src/domain/tasks.ts` | L50-58 |
| `src/domain/tasks.ts` | L78-102 |
| `src/domain/tasks.test.ts` | L60-102 |
| `src/domain/tasks.ts` | L34-36 |
| `src/domain/tasks.ts` | L73-78 |
| `src/domain/session.ts` | L1-10 |
| `src/domain/session.ts` | L10-58 |
| `src/domain/git.ts` | L82-131 |
| `src/domain/git.ts` | L71-82 |

</details>

---

The requirements and current code structure for task #008 are now clear. Here’s the plan for implementation:

---

### Implementation Plan for Task #008

**Goal:**  
- By default, `minsky tasks list` should only show tasks that are not DONE.
- Add a CLI option (`--all` or `--show-done`) to include DONE tasks in the output.
- Filtering must be performed in the domain layer, not just the CLI.
- Update help text, documentation, and tests.

---

#### 1. **Domain Layer Changes**
- Update the `TaskListOptions` interface to support a flag like `showDone?: boolean`.
- Update `MarkdownTaskBackend.listTasks` to:
  - By default, filter out DONE tasks.
  - If `showDone` is true, return all tasks.
  - If `status` is provided, continue to filter by status (for backward compatibility).

#### 2. **CLI Command Changes**
- In `src/commands/tasks/list.ts`:
  - Add a `--all` (or `--show-done`) option.
  - Pass this flag to the domain layer.
  - Update help text to document the new default and option.

#### 3. **Tests**
- Update/add tests to verify:
  - Default output excludes DONE tasks.
  - Output with the new option includes DONE tasks.
  - JSON output respects the new option.

#### 4. **Documentation**
- Update CLI help and project documentation to describe the new behavior and option.

#### 5. **Changelog**
- Update the nearest `CHANGELOG.md` with a reference to this task.

---

**Proceeding to implement the domain and CLI changes.**

---

Read file: src/domain/tasks.ts

---

Read file: src/commands/tasks/list.ts

---

Read file: src/domain/tasks.test.ts

---

Read file: src/commands/tasks/list.ts

---

Read file: CHANGELOG.md

---

Ready to implement the following changes for task #008:

**Summary of changes:**
- By default, `minsky tasks list` will only show tasks that are not DONE.
- Add a `--all` option to include DONE tasks in the output.
- Filtering will be performed in the domain layer.
- Update help text, documentation, and tests.

**Files to update:**
- `src/domain/tasks.ts` (domain logic for filtering)
- `src/commands/tasks/list.ts` (CLI option and help)
- `src/domain/tasks.test.ts` (tests for new default and option)
- `CHANGELOG.md` (changelog entry)

Proceeding to make these changes.

---

Cancelled

---

