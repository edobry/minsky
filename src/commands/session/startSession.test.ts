import { describe, it, expect } from "bun:test"; describe("startSession URL conversion", () => { it("converts local path to file:// URL", () => { const mockFs = { existsSync: (_path: string): boolean => true, statSync: (_path: string): { isDirectory: () => boolean } => ({ isDirectory: (): boolean => true }) }; const mockPath = { resolve: (p: string): string => `/resolved${p}` }; const localPath = "/local/repo"; const convertToFileUrl = (path: string): string => { if (mockFs.existsSync(path) && mockFs.statSync(path).isDirectory()) { const absolutePath = mockPath.resolve(path); return `file://${absolutePath}`; } return path; }; const result = convertToFileUrl(localPath); const expectedUrl = `file:///resolved${localPath}`; expect(result).toBe(expectedUrl); }); });
