import { describe, it, expect } from "bun:test"; describe("startSession URL conversion", () => { it("converts local path to file:// URL", () => { const mockFs = { existsSync: () => true, statSync: () => ({ isDirectory: () => true }) }; const mockPath = { resolve: (p) => `/resolved${p}` }; const testLocalRepo = "/local/repo"; const convertToFileUrl = (localPath) => { if (mockFs.existsSync(localPath) && mockFs.statSync(localPath).isDirectory()) { const absolutePath = mockPath.resolve(localPath); return `file://${absolutePath}`; } return localPath; }; const result = convertToFileUrl(testLocalRepo); const expectedUrl = `file:///resolved${testLocalRepo}`; expect(result).toBe(expectedUrl); }); });
