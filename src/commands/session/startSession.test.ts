import { describe, it, expect } from "bun:test"; describe("startSession URL conversion", () => { it("converts local path to file:// URL", () => { const localPath = "/local/repo"; const mockFs = { existsSync: (_path: string) => true, statSync: (_path: string) => ({ isDirectory: () => true }) }; const mockPath = { resolve: (p: string) => `/resolved${p}` }; const convertToFileUrl = (path: string): string => { if (mockFs.existsSync(path) && mockFs.statSync(path).isDirectory()) { const absolutePath = mockPath.resolve(path); return `file://${absolutePath}`; } return path; }; const result = convertToFileUrl(localPath); const expectedUrl = `file:///resolved${localPath}`; expect(result).toBe(expectedUrl); }); });
