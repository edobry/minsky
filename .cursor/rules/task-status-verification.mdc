---
description: REQUIRED when checking or reporting on task status to verify both tracking system status and actual implementation state
globs: ["**/*"]
alwaysApply: false
---
# BUG NOTE

> **BUG:** Updates to this file are not currently reflected in the Minsky CLI rule system (`minsky rules get ...`). Manual editing of this file is required until the rule sync bug is fixed.
> _See: [Task #055: Document and Fix Rule Sync Bug in Minsky CLI](mdc:process/tasks/055-document-and-fix-rule-sync-bug-in-minsky-cli.md)_

# Task Status Verification Protocol

When investigating or reporting on a task's status, follow these verification steps to ensure accuracy.

## Core Requirements

- **Never rely solely on the tracking system status**
- **Always check both tracking status and implementation status**
- **Report any discrepancies between tracked status and actual implementation**
- **Verify if code has been merged to main branch**
- **Check session status if applicable**

## Verification Steps

1. **Basic Status Check**:
   ```bash
   minsky tasks get <taskId> --json
   ```

2. **Implementation Verification**:
   - Check for *all* commits and merges that might include the task, not just those with a specific message pattern.
   - Search for the following patterns in commit messages:
     - `feat(#<taskId>)`
     - `fix(#<taskId>)`
     - `task#<taskId>`
     - Any merge commits that reference the task or its branch (e.g., `Merge.*task#<taskId>`)
   - Example commands:
   ```bash
   git log --grep="feat(#<taskId>)" --oneline main
   git log --grep="fix(#<taskId>)" --oneline main
   git log --grep="task#<taskId>" --oneline main
   git log --oneline --merges --grep=task#<taskId>
   ```
   - Review the commits included in relevant merge commits to ensure the implementation is present.

3. **Session Status Check**:
   ```bash
   # Check if session exists
   minsky session get --task <taskId>

   # If exists, check branch status
   cd $(minsky session dir <session>)
   git status
   git log -n 5 --oneline
   ```

4. **Discrepancy Resolution**:

   // AVOID
   "Task #123 is in progress."

   // PREFER
   "Task #123 is marked as 'IN-PROGRESS' in the tracking system, but the implementation has been merged to main branch in commit a36f4e8."

5. **Complete Status Report**:

   // AVOID
   "Task #020 is in progress."

   // PREFER
   "Task #020: Official status is 'IN-PROGRESS', but implementation has been merged to main branch (commit a36f4e8). The session still exists but is redundant. Recommend updating task status to 'DONE' and cleaning up the session."

## Verification Checkpoint
- Always check for all possible commit message patterns and merge scenarios, not just `feat`/`fix`.
- Review merge commits and their included changes for the task.
- Confirm that the implementation is present on the main branch, regardless of commit message format.

## When to Apply This Protocol

- Responding to direct queries about task status
- Before starting work on a task
- When reporting on project progress
- When determining if a task needs implementation
