---
description: Use this when working on a new task with minsky
globs: 
alwaysApply: false
---
# Rule Name: minsky

## Description

This rule defines the standard workflow for working with tasks using the Minsky tool. It is intended for inclusion in `.cursor/rules/` in any project that uses Minsky for task management.

**For general task process requirements, see [`tasks-process.mdc`](mdc:.cursor/rules/tasks-process.mdc).**

## Minsky Task Workflow

When asked to work on a task (by name, description, or ID):

1. **Find the Task ID**
   - List all tasks in JSON and locate the relevant task:
     ```bash
     minsky tasks list --json
     ```

2. **Check Task Status**
   - Before starting any work, check the current status of the task:
     ```bash
     minsky tasks status get '<task-id>'
     ```
   - If the task is already marked as DONE or IN-REVIEW, confirm with the user before proceeding.

3. **Start a Session**
   - Begin a new session for the task:
     ```bash
     minsky session start --task <task-id>
     ```

4. **Enter the Session Directory**
   - Get the session directory and change into it:
     ```bash
     minsky session dir
     cd <output>
     ```

5. **Plan and Document**
   - Read the task spec (usually in `process/tasks/<task-id>-<task-name>.md`).
   - Draft an implementation plan and append it to the end of the task document.

6. **Implement and Commit**
   - Work on the task, committing changes at logical intervals.

7. **Prepare PR Description**
   - Generate a PR description:
     ```bash
     minsky git pr
     ```
   - Save it to `process/tasks/<task-id>/pr.md` and commit.

8. **Push and Mark In Review**
   - Push your branch:
     ```bash
     git push origin <branch-name>
     ```
   - Set the task status to in review:
     ```bash
     minsky task status set <task-id> IN-REVIEW
     ```

## Re-entering a Working Session

When asked to continue working on a task:

1. **Check Task Status First**
   - Always check the current status of the task before doing any work:
     ```bash
     minsky tasks status get '<task-id>'
     ```
   - If the task is already DONE, inform the user and suggest next steps.

2. **Find Existing Session**
   - Check if a session already exists for this task:
     ```bash
     minsky session list --json | grep "<task-id>"
     ```

3. **Enter Existing Session**
   - If a session exists, switch to it:
     ```bash
     minsky session dir <session-name>
     cd $(minsky session dir <session-name>)
     ```

4. **Resume Work**
   - Review the current state of the implementation
   - Check the verification steps in the task file to see what's completed
   - Continue with implementation or testing as needed

5. **Finalize as Normal**
   - Follow steps 6-8 from the main workflow to complete the task

## Notes

- Always follow the full process in `tasks-process.mdc`.
- Do not skip verification or documentation steps.
- Reference the task number in PRs and commits.
